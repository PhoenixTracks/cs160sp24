<!DOCTYPE html>
<html>
  <head>
    <title>Phoenix Tracks</title>

    <link
      href="https://fonts.googleapis.com/css?family=Fira+Sans"
      rel="stylesheet"
    />
    <!-- let's include the css file for bootstrap, then our custom css -->
    <link
      rel="stylesheet"
      type="text/css"
      href="/vendor/bootstrap/css/bootstrap.css"
    />
    <script src="/vendor/bootstrap/js/bootstrap.bundle.js"></script>
    <link rel="stylesheet" type="text/css" href="/css/main.css" />
    <link rel="stylesheet" type="text/css" href="/css/styles.css" />
  </head>

  <body>
    <div class="container">
      <div class="row">
        <div class="col-12">
          <h1>Quiz</h1>
          <h4>Question 1</h4>
          <h6>What skills do you have?</h6>
          <input type="text" id="searchBox1" placeholder="Search...">
             <div id="results1"></div>
          <hr>
          <h4>Question 2</h4>
          <h6>What skills would you like to learn?</h6>
          <input type="text" id="searchBox2" placeholder="Search..." onchange="addTimeFrame(this.value)">
          <div id="results2"></div>
          <hr>
          <h4>Question 3</h4>
          <div id="timeFrames"></div>
          <hr>
          <button id="submit" class="btn btn-primary" >Submit Quiz</button>
        </div>
      </div>
    </div>
    <script>
      function navigator() {
    var existUser = localStorage.getItem("existUser");
    if (!existUser) {
      window.location.href = 'quiz.html';
    } else {
      window.location.href = 'dashboard.html';
    }
  }
  
  const textData = [
    "Coding",
    "Excel",
    "Forklift Driving",
    "Engineering",
    "Cooking",
    "construction",
    "accounting",
    "Communication", "Leadership", "Teamwork", "Creativity", "Adaptability", "Problem-Solving", "Technical", "Analytical", "Organization", "Detail-Oriented", "Innovation", "Collaboration", "Efficiency", "Reliability", "Initiative", "Empathy", "Interpersonal", "Motivation", "Flexibility", "Critical-Thinking"
];
  

let selectedItems1 = []; 
let selectedItems2 = []; 

function search(num) {
  const query = document.getElementById("searchBox" + num).value.trim().toLowerCase();
  const resultsContainer = document.getElementById("results" + num);
  resultsContainer.innerHTML = "";

  const selectedItems = num === 1 ? selectedItems1 : selectedItems2; // Use the appropriate array
  const filteredItems = textData.filter(text => text.toLowerCase().includes(query));

  filteredItems.forEach(text => {
      const resultItem = document.createElement("div");
      resultItem.textContent = text;
      resultItem.classList.add("result-item");
      if (selectedItems.includes(text)) {
          resultItem.classList.add("selected");
      }
      resultItem.addEventListener("click", function() {
          const index = selectedItems.indexOf(text);
          if (index === -1) {
              selectedItems.push(text); 
              resultItem.classList.add("selected");
          } else {
              selectedItems.splice(index, 1); 
              resultItem.classList.remove("selected");
          }
          addTimeFrame();
      });
      resultsContainer.appendChild(resultItem);
  });

  selectedItems.forEach(text => {
      if (!filteredItems.includes(text)) {
          const resultItem = document.createElement("div");
          resultItem.textContent = text;
          resultItem.classList.add("result-item", "selected");
          resultItem.addEventListener("click", function() {
              const index = selectedItems.indexOf(text);
              selectedItems.splice(index, 1); 
              resultItem.remove();
          });
          resultsContainer.appendChild(resultItem);
      }
  });
  addTimeFrame();
}

document.getElementById("searchBox1").addEventListener("input", function() {
    search(1);
});

document.getElementById("searchBox2").addEventListener("input", function() {
  search(2);
});

function addTimeFrame() {

  document.getElementById('timeFrames').innerHTML = '';

  var skillTimeFrames = {};

  for (var i = 0; i < selectedItems2.length; i++) {
    var select = document.createElement('select');

    for (var j = 1; j <= 6; j++) {
      var option = document.createElement('option');
      option.value = j;
      option.text = j + ' month(s)';
      select.appendChild(option);
    }

    var label = document.createElement('label');
    label.innerHTML = 'Time frame for ' + selectedItems2[i] + ': ';
    label.appendChild(select);

    document.getElementById('timeFrames').appendChild(label);

    skillTimeFrames[selectedItems2[i]] = select.value;

  }

  console.log(skillTimeFrames);
}

document.getElementById("submit").addEventListener("click", function() {
  var skillTimeFrames = {};

  for (var i = 0; i < selectedItems2.length; i++) {
    var skill = selectedItems2[i];
    var select = document.querySelector('select[label="Time frame for ' + skill + ':"]');
    var timeFrame = select.value;

    skillTimeFrames[skill] = timeFrame;
  }

  console.log(skillTimeFrames);
});

    </script>
  </body>
</html>
